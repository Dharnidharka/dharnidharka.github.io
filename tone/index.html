<html><head></head><body cz-shortcut-listen="true">

    </span>
</div><pre>"BD2" : "tone/_assets/_audio/TECHNO/BD2.WAV",
"BD1" : "tone/_assets/_audio/TECHNO/BD1.WAV",
"RS" : "tone/_assets/_audio/TECHNO/RS.WAV",
"SD1" : "tone/_assets/_audio/TECHNO/SD1.WAV",
"SD2" : "tone/_assets/_audio/TECHNO/SD2.WAV",
"T1" : "tone/_assets/_audio/TECHNO/T1.WAV",
"HH1" : "tone/_assets/_audio/TECHNO/HH1.WAV",
"T2" : "tone/_assets/_audio/TECHNO/T2.WAV",
"T3" : "tone/_assets/_audio/TECHNO/T3.WAV",
"OH" : "tone/_assets/_audio/TECHNO/OH.WAV",
"P1" : "tone/_assets/_audio/TECHNO/P1.WAV",
"P2" : "tone/_assets/_audio/TECHNO/P2.WAV",
"P3" : "tone/_assets/_audio/TECHNO/P3.WAV",
"S1" : "tone/_assets/_audio/TECHNO/S1.WAV",
"BASS" : "tone/_assets/_audio/TECHNO/BASS.WAV",
"MIDS" : "tone/_assets/_audio/TECHNO/MIDS.WAV",
"LEADS" : "tone/_assets/_audio/TECHNO/LEADS.WAV",
"FX" : "tone/_assets/_audio/TECHNO/FX.WAV",
Array
(
    [0] =&gt; Array
        (
            [0] =&gt; 35
            [1] =&gt; tone/_assets/_audio/TECHNO/BD2.WAV
        )

    [1] =&gt; Array
        (
            [0] =&gt; 36
            [1] =&gt; tone/_assets/_audio/TECHNO/BD1.WAV
        )

    [2] =&gt; Array
        (
            [0] =&gt; 37
            [1] =&gt; tone/_assets/_audio/TECHNO/RS.WAV
        )

    [3] =&gt; Array
        (
            [0] =&gt; 38
            [1] =&gt; tone/_assets/_audio/TECHNO/SD1.WAV
        )

    [4] =&gt; Array
        (
            [0] =&gt; 40
            [1] =&gt; tone/_assets/_audio/TECHNO/SD2.WAV
        )

    [5] =&gt; Array
        (
            [0] =&gt; 41
            [1] =&gt; tone/_assets/_audio/TECHNO/T1.WAV
        )

    [6] =&gt; Array
        (
            [0] =&gt; 42
            [1] =&gt; tone/_assets/_audio/TECHNO/HH1.WAV
        )

    [7] =&gt; Array
        (
            [0] =&gt; 43
            [1] =&gt; tone/_assets/_audio/TECHNO/T2.WAV
        )

    [8] =&gt; Array
        (
            [0] =&gt; 45
            [1] =&gt; tone/_assets/_audio/TECHNO/T3.WAV
        )

    [9] =&gt; Array
        (
            [0] =&gt; 46
            [1] =&gt; tone/_assets/_audio/TECHNO/OH.WAV
        )

    [10] =&gt; Array
        (
            [0] =&gt; 47
            [1] =&gt; tone/_assets/_audio/TECHNO/P1.WAV
        )

    [11] =&gt; Array
        (
            [0] =&gt; 48
            [1] =&gt; tone/_assets/_audio/TECHNO/P2.WAV
        )

    [12] =&gt; Array
        (
            [0] =&gt; 50
            [1] =&gt; tone/_assets/_audio/TECHNO/P3.WAV
        )

    [13] =&gt; Array
        (
            [0] =&gt; 51
            [1] =&gt; tone/_assets/_audio/TECHNO/S1.WAV
        )

    [14] =&gt; Array
        (
            [0] =&gt; 60
            [1] =&gt; tone/_assets/_audio/TECHNO/BASS.WAV
        )

    [15] =&gt; Array
        (
            [0] =&gt; 62
            [1] =&gt; tone/_assets/_audio/TECHNO/MIDS.WAV
        )

    [16] =&gt; Array
        (
            [0] =&gt; 64
            [1] =&gt; tone/_assets/_audio/TECHNO/LEADS.WAV
        )

    [17] =&gt; Array
        (
            [0] =&gt; 65
            [1] =&gt; tone/_assets/_audio/TECHNO/FX.WAV
        )

)
</pre>

	<!-- Tone JS -->

	<script src="https://code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>
	<script type="text/javascript" src="tone/node_modules/tone/build/Tone.js"></script>
	<script type="text/javascript" src="tone/node_modules/tone/build/MidiConvert.js"></script>

	<script id="ToneCode" type="text/javascript">
		var midiPart;

		var Compressor = new Tone.Compressor({
			"threshold" : -30,
			"ratio" : 6,
			"attack" : 0.3,
			"release" : 0.1
		}).toMaster();


		// Данный метод объявления отдельных семплеров позволяет внедрять их в цепочку индивидуальных эффектов, например, давать на все басы эквализацию, а на барабаны — компрессор. При этом, сами инструменты можно также объединять в цепи, накладывая эффекты на группы инструментов, не затрагивая общий микс. Но мне кажется, он нагружает систему. https://tonejs.github.io/docs/#Sampler
		// var perc 		= new Tone.Sampler({ "url" : "../tone/_assets/_audio/techno/perc.wav"}).chain(Compressor);

		var t35 = new Tone.Sampler({"url" : "tone/_assets/_audio/TECHNO/BD2.WAV"}).chain(Compressor);
    var t36 = new Tone.Sampler({"url" : "tone/_assets/_audio/TECHNO/BD1.WAV"}).chain(Compressor);
    var t37 = new Tone.Sampler({"url" : "tone/_assets/_audio/TECHNO/RS.WAV"}).chain(Compressor);
    var t38 = new Tone.Sampler({"url" : "tone/_assets/_audio/TECHNO/SD1.WAV"}).chain(Compressor);
    var t40 = new Tone.Sampler({"url" : "tone/_assets/_audio/TECHNO/SD2.WAV"}).chain(Compressor);
    var t41 = new Tone.Sampler({"url" : "tone/_assets/_audio/TECHNO/T1.WAV"}).chain(Compressor);
    var t42 = new Tone.Sampler({"url" : "tone/_assets/_audio/TECHNO/HH1.WAV"}).chain(Compressor);
    var t43 = new Tone.Sampler({"url" : "tone/_assets/_audio/TECHNO/T2.WAV"}).chain(Compressor);
    var t45 = new Tone.Sampler({"url" : "tone/_assets/_audio/TECHNO/T3.WAV"}).chain(Compressor);
    var t46 = new Tone.Sampler({"url" : "tone/_assets/_audio/TECHNO/OH.WAV"}).chain(Compressor);
    var t47 = new Tone.Sampler({"url" : "tone/_assets/_audio/TECHNO/P1.WAV"}).chain(Compressor);
    var t48 = new Tone.Sampler({"url" : "tone/_assets/_audio/TECHNO/P2.WAV"}).chain(Compressor);
    var t50 = new Tone.Sampler({"url" : "tone/_assets/_audio/TECHNO/P3.WAV"}).chain(Compressor);
    var t51 = new Tone.Sampler({"url" : "tone/_assets/_audio/TECHNO/S1.WAV"}).chain(Compressor);
    var t60 = new Tone.Sampler({"url" : "tone/_assets/_audio/TECHNO/BASS.WAV"}).chain(Compressor);
    var t62 = new Tone.Sampler({"url" : "tone/_assets/_audio/TECHNO/MIDS.WAV"}).chain(Compressor);
    var t64 = new Tone.Sampler({"url" : "tone/_assets/_audio/TECHNO/LEADS.WAV"}).chain(Compressor);
    var t65 = new Tone.Sampler({"url" : "tone/_assets/_audio/TECHNO/FX.WAV"}).chain(Compressor);



		// Следующий метод крайне удобен в использовании, но исключает наложение отдельных эффектов на отдельные треки. При этом, существует возможность создать несоклько отдельных Мультиплееров и наложить на них свои цепи эффектов. Громкости можно регулировать через параметр gain метода start(). https://tonejs.github.io/docs/#MultiPlayer

		var keys = new Tone.MultiPlayer({
			urls : {
				"BD2" : "tone/_assets/_audio/TECHNO/BD2.WAV",
"BD1" : "tone/_assets/_audio/TECHNO/BD1.WAV",
"RS" : "tone/_assets/_audio/TECHNO/RS.WAV",
"SD1" : "tone/_assets/_audio/TECHNO/SD1.WAV",
"SD2" : "tone/_assets/_audio/TECHNO/SD2.WAV",
"T1" : "tone/_assets/_audio/TECHNO/T1.WAV",
"HH1" : "tone/_assets/_audio/TECHNO/HH1.WAV",
"T2" : "tone/_assets/_audio/TECHNO/T2.WAV",
"T3" : "tone/_assets/_audio/TECHNO/T3.WAV",
"OH" : "tone/_assets/_audio/TECHNO/OH.WAV",
"P1" : "tone/_assets/_audio/TECHNO/P1.WAV",
"P2" : "tone/_assets/_audio/TECHNO/P2.WAV",
"P3" : "tone/_assets/_audio/TECHNO/P3.WAV",
"S1" : "tone/_assets/_audio/TECHNO/S1.WAV",
"BASS" : "tone/_assets/_audio/TECHNO/BASS.WAV",
"MIDS" : "tone/_assets/_audio/TECHNO/MIDS.WAV",
"LEADS" : "tone/_assets/_audio/TECHNO/LEADS.WAV",
"FX" : "tone/_assets/_audio/TECHNO/FX.WAV",
			},
		}, function(){
			playMidi('tone/_assets/_midi/BREAK_INTENCITY_1.mid');
		}).chain(Compressor);


		//Запуск функции чтения МИДИ и проигрывания инструментов в зависимости от ноты
		function playMidi(file) {
      var synth = new Tone.PolySynth(8).toMaster()

			MidiConvert.load(file, function(midi) {
				console.log(midi.tracks[0].notes);

				// make sure you set the tempo before you schedule the events
				Tone.Transport.bpm.value = midi.header.bpm;

				midiPart = new Tone.Part(function(time, note) {

					// Здесь происходят события яваскрипт, расставленные по времени

					console.log(note);

					// Проигрывание семпла Sampler
					synth.triggerAttackRelease(note.name, note.duration, time, note.velocity);

					// Проигрывание ноты из мультиплеера
					//keys.start(note.midi, note.time, 0, 16, 0, note.velocity);

				}, midi.tracks[0].notes).start();
				midiPart.loop = true;
				midiPart.loopEnd = midi.duration;
				Tone.Transport.start('4*4n');
			});
		}



	</script></body></html>
